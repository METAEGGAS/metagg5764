<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!doctype html><html lang="ar" dir="rtl"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>QT Real Trading</title><style>
*{margin:0;padding:0;box-sizing:border-box}html,body{height:100%;overflow:hidden}body{font-family:Arial,sans-serif;background:#0a1628;color:#fff;direction:rtl;display:flex;flex-direction:column;font-size:12.6px}
.header{flex:0 0 auto;display:flex;justify-content:space-between;align-items:center;padding:4px 10px;background:#0f1d35;position:relative}
.header::after{content:'';position:absolute;bottom:-8px;left:0;right:0;height:8px;background:linear-gradient(to bottom,#0f1d35,transparent);pointer-events:none;z-index:5}
.header-left{display:flex;gap:8px;align-items:center}.header-center{display:flex;gap:8px;align-items:center}.header-right{display:flex;align-items:center;gap:8px}
.icon-btn{width:38px;height:38px;background:rgba(255,255,255,.05);border-radius:8px;display:flex;align-items:center;justify-content:center;border:0;cursor:pointer;padding:0}
.logo-btn img{width:100%;height:100%;display:block;object-fit:cover}
.balance-box{background:#0f1d35;padding:8px 14px;border-radius:10px;min-height:46px;display:flex;align-items:center;justify-content:space-between;gap:10px;border:1px solid rgba(255,255,255,.12);position:relative;cursor:pointer;user-select:none;z-index:2601}
.balance-main{display:flex;align-items:center;gap:9px;min-width:0;flex:1}
.acc-top-icon{width:20px;height:14px;border-radius:3px;box-shadow:0 2px 4px rgba(0,0,0,.3);flex:0 0 auto;object-fit:cover}
.balance-label{font-size:9.5px;color:#fff;font-weight:700;letter-spacing:.3px;margin-bottom:2px}
.balance-amount{font-size:15px;font-weight:900;letter-spacing:.4px;color:#fff}
.balance-content{display:flex;flex-direction:column;min-width:0}
.balance-arrow{display:flex;align-items:center;justify-content:center;color:#8b9cb5;font-size:16px;transition:transform .2s}
.balance-box.open .balance-arrow{transform:rotate(180deg)}
.accMenu{position:absolute;top:calc(100% + 8px);right:0;width:260px;background:linear-gradient(145deg,#101a2f 0%,#0d1117 100%);border:2px solid rgba(255,255,255,.10);border-radius:16px;box-shadow:0 12px 32px rgba(0,0,0,.6),0 0 0 1px rgba(255,255,255,.05) inset;padding:10px;z-index:99999;display:none}
.accMenu.show{display:block}
.accSwitch{display:flex;gap:8px;background:#0d1117;border-radius:10px;padding:4px;margin-bottom:12px}
.accSwitchBtn{flex:1;padding:8px;border-radius:8px;font-size:11px;font-weight:900;transition:.2s;border:1.5px solid transparent;display:flex;align-items:center;justify-content:center;gap:5px;background:transparent;color:#fff;cursor:pointer}
.accSwitchBtn.live{color:#00ff41}.accSwitchBtn.demo{color:#ffd700}.accSwitchBtn.active{background:rgba(255,255,255,.1);border-color:currentColor}
.accItem{background:rgba(255,255,255,.03);border:1.3px solid rgba(255,255,255,.10);border-radius:12px;padding:10px 12px;margin-bottom:9px;cursor:pointer;transition:.15s;display:flex;align-items:center;justify-content:space-between;gap:10px}
.accItem.active{background:linear-gradient(135deg,rgba(66,153,225,.15) 0%,rgba(49,130,206,.1) 100%);border-color:#4299e1;box-shadow:0 0 12px rgba(66,153,225,.2)}
.accL{display:flex;align-items:center;gap:10px;min-width:0}
.accIco{width:22px;height:22px;object-fit:contain;filter:drop-shadow(0 2px 4px rgba(0,0,0,.4))}
.accAmt{font-size:16px;font-weight:1000;color:#fff;white-space:nowrap}
.refillBtn{width:100%;background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%);border:0;border-radius:10px;padding:10px;font-size:12px;font-weight:1000;color:#fff;letter-spacing:.5px;box-shadow:0 4px 12px rgba(66,153,225,.4);cursor:pointer}
.wallet-btn{width:38px;height:38px;background:#16a34a;border-radius:8px;border:2px solid rgba(255,255,255,.15);cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;overflow:hidden}
.wallet-btn img{width:100%;height:100%;display:block;object-fit:cover}
.time-display{position:absolute;left:8px;top:calc(100% + 8px);font-size:11px;color:#8b9cb5;font-weight:700;letter-spacing:.4px;background:rgba(15,29,53,.95);padding:6px 12px;border-radius:6px;z-index:180;border:1px solid rgba(255,255,255,.1);display:flex;align-items:center;gap:6px}
.time-display::before{content:'';width:6px;height:6px;background:#0f0;border-radius:50%;box-shadow:0 0 8px #0f0;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.chart-container{flex:1 1 auto;min-height:0;background:#0a1628;position:relative;overflow:hidden}
.quick-actions{position:absolute;top:52px;left:8px;display:flex;flex-direction:column;gap:6px;z-index:190;pointer-events:none}
.quick-actions button{pointer-events:auto}
.qa-btn{width:44px;height:44px;background:#0f1d35;border:1px solid rgba(255,255,255,.12);border-radius:8px;display:flex;align-items:center;justify-content:center;padding:0;cursor:pointer;transition:background .15s}
.qa-btn:hover{background:#1a2942}.qa-btn:active{background:#213554}
.chart-frame{position:relative;width:100%;height:100%;overflow:hidden}
.plot{position:absolute;inset:0;overflow:hidden}
#chartCanvas{display:block;position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;touch-action:none;cursor:grab}
#chartCanvas:active{cursor:grabbing}
.candle-timer{position:absolute;color:rgba(255,255,255,.35);font-size:11px;font-weight:700;z-index:180;pointer-events:none;font-family:monospace}
.price-line{position:absolute;left:0;right:0;height:2px;background:transparent;z-index:150;pointer-events:none;border-top:2px dashed rgba(255,255,255,.7)}
.timeLabels{position:absolute;left:0;right:0;bottom:0;height:24px;background:rgba(10,22,40,.95);border-top:1px solid rgba(255,255,255,.08);pointer-events:none;z-index:160}
.timeLabel{position:absolute;bottom:2px;font-size:8.5px;font-weight:900;color:rgba(255,255,255,.55);transform:translateX(-50%);white-space:nowrap}
.timeLabel.major{color:rgba(255,215,0,.85);font-weight:900}
.pair-display{position:absolute;left:8px;bottom:28px;background:rgba(10,22,40,.85);backdrop-filter:blur(8px);z-index:170;display:flex;align-items:center;gap:8px;padding:6px 12px;border-radius:8px;border:2px solid rgba(255,255,255,.25)}
.pair-flags{display:flex;align-items:center;gap:5px}
.pair-display img{width:20px;height:20px;object-fit:cover;border-radius:50%;border:1.5px solid rgba(255,255,255,.3)}
.pair-text{font-size:11px;font-weight:900;color:#fff;letter-spacing:.5px}
#priceScale{position:absolute;top:0;right:0;bottom:0;width:50px;pointer-events:none;z-index:170;background:transparent!important;border:none!important;box-shadow:none!important}
#priceScaleLabels{position:absolute;inset:0;background:transparent!important;border:none!important;box-shadow:none!important}
#currentPrice{position:absolute;right:8px;transform:translateY(-50%);color:#000;font-size:10px;font-weight:900;white-space:nowrap;background:#ffd700!important;padding:4px 8px!important;border-radius:4px!important;box-shadow:0 0 10px rgba(255,215,0,.6)!important;text-shadow:none!important;border:1px solid rgba(255,215,0,.8)!important}
#priceScale .pLabel{position:absolute;right:8px;transform:translateY(-50%);font-size:9px;font-weight:800;color:#fff;white-space:nowrap;background:transparent!important;box-shadow:none!important;border:none!important;text-shadow:0 0 6px rgba(255,255,255,.4)!important;padding:0!important;margin:0!important;filter:brightness(1.3)}
#priceScale .pLabel.major{color:#fff;filter:brightness(1.5)}
.controls{flex:0 0 auto;padding:9px 10.8px 0;background:#0f1d35}
.timer-amount{display:flex;gap:7.2px;margin-bottom:9px}
.control-group{flex:1;display:flex;flex-direction:column;gap:5.4px}
.control-label{font-size:9.9px;color:#8b9cb5;font-weight:600;text-align:center}
.control-value{background:#0a1628;padding:9px 14px;border-radius:9px;border:1px solid rgba(255,255,255,.2);font-size:16px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:10px;cursor:pointer;position:relative;user-select:none;width:100%;min-height:46px;box-shadow:inset 0 2px 8px rgba(0,0,0,.4)}
.control-value:hover{background:#0d1a2e}
.control-text{flex:1;text-align:center}
.control-icon{width:18px;height:18px;flex-shrink:0;display:flex;align-items:center;justify-content:center}
.dropdown{position:absolute;bottom:calc(100% + 7.2px);left:-9px;right:-9px;background:#1a2942;border-radius:10.8px;box-shadow:0 -3.6px 18px rgba(0,0,0,.6);z-index:200;display:none;border:1px solid rgba(255,255,255,.15);max-width:360px;width:auto;min-width:calc(100% + 18px)}
.dropdown.show{display:block}
.dropdown-header{display:flex;border-bottom:1px solid rgba(255,255,255,.1);padding:3.6px}
.dropdown-tab{flex:1;padding:9px 14.4px;text-align:center;font-size:10.8px;cursor:pointer;background:transparent;border:0;color:#8b9cb5;font-weight:700;border-radius:7.2px;transition:all .2s}
.dropdown-tab.active{color:#fff;background:rgba(59,130,246,.2)}
.dropdown-content{max-height:216px;overflow-y:auto;padding:5.4px;display:grid;grid-template-columns:repeat(3,1fr);gap:4px}
.dropdown-item{padding:10.8px 8px;font-size:12.6px;cursor:pointer;border-radius:7.2px;font-weight:600;transition:all .2s;text-align:center}
.dropdown-item:hover{background:rgba(59,130,246,.15);color:#3b82f6}
.custom-input{padding:7.2px 10.8px;display:none}
.custom-input.show{display:block}
.time-input{width:100%;background:#0f1d35;border:1px solid rgba(255,255,255,.2);border-radius:7.2px;padding:10.8px;color:#fff;font-size:14.4px;text-align:center;font-weight:700;letter-spacing:.9px}
#timeDisplay.editing{background:#0f1d35;border:1px solid rgba(59,130,246,.5);outline:none;cursor:text;color:#fff}
#amountDisplay{background:transparent;border:none;color:#fff;font-size:16px;text-align:center;font-weight:700;outline:none;width:100%;cursor:text;padding:0}
#amountDisplay:focus{outline:none}
.trade-buttons{display:flex;gap:7.2px;margin:9px 0 5.4px}
.trade-btn{flex:1;height:38px;border:0;border-radius:10.8px;font-size:13.5px;font-weight:800;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:7.2px;transition:transform .2s}
.trade-btn:active{transform:scale(.96)}
.buy-btn{background:linear-gradient(135deg,#0f0,#0c0);color:#fff}
.buy-btn:before{content:"â†—";font-size:16.2px}
.sell-btn{background:linear-gradient(135deg,#f00,#c00);color:#fff}
.sell-btn:before{content:"â†˜";font-size:16.2px}
.ai-trade-btn{flex:2;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}
.ai-trade-btn:before{content:"AI";margin-right:4.5px;font-weight:900}
.bottom-nav{flex:0 0 auto;background:#0f1d35;display:flex;justify-content:space-around;padding:7.2px 0;border-top:1px solid rgba(255,255,255,.05)}
.nav-item{display:flex;flex-direction:column;align-items:center;gap:3.6px;color:#6b7a94;font-size:9px;cursor:pointer}
.nav-item.active{color:#3b82f6}
.nav-icon{width:21.6px;height:21.6px;display:flex;align-items:center;justify-content:center;font-size:16.2px}
.loading-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(10,22,40,.95);display:flex;align-items:center;justify-content:center;z-index:9999;display:none}
.loading-overlay.show{display:flex}
.loading-content{text-align:center}
.loading-spinner{width:50px;height:50px;border:4px solid rgba(59,130,246,.3);border-top-color:#3b82f6;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 20px}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-text{color:#fff;font-size:14px;font-weight:600}

/* ===== Pair HUD + Pair Panel (Ù…Ø£Ø®ÙˆØ° Ù…Ù† ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªØ§Ù†ÙŠ) ===== */
.pair-box{position:absolute;left:8px;bottom:32px;z-index:175;display:inline-flex;align-items:center;gap:6.6px;background:#0f1d35;border:1.1px solid rgba(255,255,255,.12);border-radius:11px;padding:5.5px 9.9px;cursor:pointer;user-select:none;backdrop-filter:blur(8px)}
.pair-box .flags{display:flex;align-items:center;margin-inline:2px}
.pair-box .flags img{width:24.2px;height:24.2px;border-radius:999px;border:2.2px solid #101a2f;margin-left:-8.8px;background:#101a2f;object-fit:cover}
.pair-box .otc{margin-inline-start:6.6px;padding:2.2px 6.6px;border-radius:999px;background:rgba(255,255,255,.10);border:1.1px solid rgba(255,255,255,.18);font-size:11px;font-weight:1000;letter-spacing:.44px}
.pairPanel{position:fixed;left:0;top:0;bottom:0;width:18vw;min-width:280px;max-width:420px;background:rgba(10,22,40,.72);border-right:1.5px solid rgba(255,255,255,.12);backdrop-filter:blur(10px);z-index:99998;transform:translateX(-105%);transition:transform .25s ease;pointer-events:auto;box-shadow:4px 0 24px rgba(0,0,0,.6)}
.pairPanel.on{transform:translateX(0)}
.pairHead{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1.5px solid rgba(255,255,255,.12);background:linear-gradient(to bottom,rgba(255,255,255,.03),transparent);user-select:none}
.pairHead b{font-size:15px;font-weight:1000;color:#fff;letter-spacing:.3px}
.pairClose{width:36px;height:36px;border-radius:11px;background:rgba(255,255,255,.08);border:1.5px solid rgba(255,255,255,.12);color:#d9e6ff;font-weight:1000;transition:.2s;cursor:pointer}
.pairList{padding:10px 12px;max-height:calc(100vh - 80px);overflow-y:auto}
.pit{width:100%;display:flex;align-items:center;justify-content:space-between;gap:11px;padding:11px 13.2px;border-radius:13.2px;background:rgba(255,255,255,.03);border:1.5px solid rgba(255,255,255,.12);color:#d9e6ff;margin:6.6px 0;transition:.2s;cursor:pointer}
.pit:hover{background:rgba(255,255,255,.05)}
.pitL{display:flex;align-items:center;gap:11px;min-width:0}
.star{width:19.8px;height:19.8px;border-radius:6.6px;background:rgba(255,159,42,.10);border:1.1px solid rgba(255,159,42,.30);display:grid;place-items:center;color:#ffb357;font-size:13.2px;flex:0 0 auto}
.fg{display:flex;align-items:center}
.fg img{width:24.2px;height:24.2px;border-radius:999px;border:2.2px solid #101a2f;margin-left:-8.8px;background:#101a2f;object-fit:cover}
.nm{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:1000}
.bad{margin-inline-start:6.6px;padding:2.2px 6.6px;border-radius:999px;background:rgba(255,255,255,.08);border:1.1px solid rgba(255,255,255,.12);font-size:11px;font-weight:1000}
</style></head><body>
<div class="loading-overlay" id="loadingOverlay"><div class="loading-content"><div class="loading-spinner"></div><div class="loading-text">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div></div></div>

<div class="header">
  <div class="header-left">
    <div class="balance-box" id="balanceBox" aria-label="Account Switcher">
      <div class="balance-main">
        <img class="acc-top-icon" id="topAccIcon" src="https://flagcdn.com/w40/us.png" alt="account">
        <div class="balance-content"><div class="balance-label" id="balLabel">QT Real USD</div><div class="balance-amount" id="balAmount">$10,000.00</div></div>
      </div>
      <div class="balance-arrow" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="#8b9cb5"><path d="M7 10l5 5 5-5z"></path></svg></div>
      <div class="accMenu" id="accMenu">
        <div class="accSwitch">
          <button class="accSwitchBtn live active" data-acc="real" type="button">LIVE</button>
          <button class="accSwitchBtn demo" data-acc="demo" type="button">Demo</button>
        </div>
        <div class="accItem active" data-type="real"><div class="accL"><img class="accIco" src="https://flagcdn.com/w40/us.png" alt="USD"><div class="accAmt" id="realAmt">$10,000.00</div></div></div>
        <div class="accItem" data-type="demo"><div class="accL"><img class="accIco" src="https://cdn-icons-png.flaticon.com/128/1344/1344761.png" alt="Demo"><div class="accAmt" id="demoAmt">$10,000.00</div></div></div>
        <button class="refillBtn" id="refillBtn" type="button">ðŸ”„ Refill Demo Account</button>
      </div>
    </div>
  </div>

  <div class="header-center">
    <button class="wallet-btn" aria-label="Wallet" onclick="window.location.href='wallet.html'"><img src="https://cdn-icons-png.flaticon.com/128/10167/10167706.png" alt="Wallet"></button>
    <button class="icon-btn logo-btn" aria-label="QT" onclick="window.location.href='profile.html'"><img id="userAvatarImg" src="https://cdn-icons-png.flaticon.com/128/18921/18921105.png" alt="QT"></button>
  </div>

  <div class="time-display" id="liveTime">00:00:00 UTC+3</div>
</div>

<div class="chart-container">
  <div class="quick-actions">
    <button class="qa-btn" aria-label="Trade History"><svg width="42" height="42" viewBox="0 0 24 24" fill="none"><defs><linearGradient id="gradBag" x1="0" y1="0" x2="24" y2="24"><stop offset="0%" stop-color="#4a90e2"></stop><stop offset="100%" stop-color="#357abd"></stop></linearGradient></defs><rect x="3" y="7" width="18" height="13" rx="3" stroke="url(#gradBag)" stroke-width="2" fill="none"></rect><path d="M8 7V5a4 4 0 0 1 8 0v2" stroke="url(#gradBag)" stroke-width="2" stroke-linecap="round"></path><line x1="7" y1="12" x2="17" y2="12" stroke="url(#gradBag)" stroke-width="1.6" stroke-linecap="round"></line></svg></button>
    <button class="qa-btn" aria-label="Options" style="color:#4a90e2"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><line x1="5" y1="7" x2="19" y2="7" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line><line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line><line x1="5" y1="17" x2="19" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line></svg></button>
  </div>

  <div class="chart-frame"><div class="plot" id="plot">
    <canvas id="chartCanvas"></canvas><div class="price-line" id="priceLine"></div><div class="candle-timer" id="candleTimer">59</div>
    <div id="priceScale"><div id="priceScaleLabels"></div><div id="currentPrice"></div></div><div class="timeLabels" id="timeLabels"></div>

    <!-- Pair HUD (Ø§Ù„Ø¬Ø¯ÙŠØ¯) -->
    <div class="pair-box" id="pairHud"><span id="pairHudTxt">EUR/USD</span><span class="otc" id="otcHud">OTC</span><span class="flags" id="pairFlags"></span><span style="opacity:.7">â–¾</span></div>
  </div></div>
</div>

<div class="controls">
  <div class="timer-amount">
    <div class="control-group">
      <div class="control-label">Time</div>
      <div class="control-value" id="timeSelector">
        <span class="control-text" id="timeDisplay">00:05</span>
        <div class="control-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 7v5l3 2"></path></svg></div>
        <div class="dropdown" id="timeDropdown"><div class="dropdown-header"><button class="dropdown-tab active" id="tabCompensation">Quick</button><button class="dropdown-tab" id="tabCustom">Custom</button></div>
          <div class="dropdown-content" id="compensationList">
            <div class="dropdown-item" data-sec="5">00:05</div><div class="dropdown-item" data-sec="10">00:10</div><div class="dropdown-item" data-sec="15">00:15</div><div class="dropdown-item" data-sec="30">00:30</div><div class="dropdown-item" data-sec="60">01:00</div><div class="dropdown-item" data-sec="120">02:00</div><div class="dropdown-item" data-sec="300">05:00</div><div class="dropdown-item" data-sec="600">10:00</div><div class="dropdown-item" data-sec="900">15:00</div><div class="dropdown-item" data-sec="1800">30:00</div><div class="dropdown-item" data-sec="3600">01:00:00</div><div class="dropdown-item" data-sec="7200">02:00:00</div>
          </div>
        </div>
      </div>
    </div>
    <div class="control-group">
      <div class="control-label">Amount</div>
      <div class="control-value" id="amountContainer">
        <input type="text" class="control-text" id="amountDisplay" value="50$">
        <div class="control-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 6v12"></path><path d="M15 9.5c0-1.4-1.3-2.5-3-2.5s-3 1.1-3 2.5 1.3 2.5 3 2.5 3 1.1 3 2.5-1.3 2.5-3 2.5-3-1.1-3-2.5"></path></svg></div>
      </div>
    </div>
  </div>
  <div class="trade-buttons"><button class="trade-btn buy-btn" id="buyBtn">BUY</button><button class="trade-btn ai-trade-btn">TRADING</button><button class="trade-btn sell-btn" id="sellBtn">SELL</button></div>
</div>

<div class="bottom-nav">
  <div class="nav-item active"><div class="nav-icon"><svg width="21.6" height="21.6" viewBox="0 0 24 24" fill="none"><rect x="2" y="2" width="20" height="20" rx="2" ry="2" stroke="currentColor" stroke-width="1.5" fill="none"></rect><line x1="4" y1="20" x2="20" y2="20" stroke="currentColor" stroke-width=".8"></line><line x1="4" y1="4" x2="4" y2="20" stroke="currentColor" stroke-width=".8"></line><polyline points="4,16 8,12 12,14 16,8 20,10" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></polyline><circle cx="4" cy="16" r="1.2" fill="currentColor"></circle><circle cx="8" cy="12" r="1.2" fill="currentColor"></circle><circle cx="12" cy="14" r="1.2" fill="currentColor"></circle><circle cx="16" cy="8" r="1.2" fill="currentColor"></circle><circle cx="20" cy="10" r="1.2" fill="currentColor"></circle></svg></div><div>Chart</div></div>
  <div class="nav-item"><div class="nav-icon"><svg width="21.6" height="21.6" viewBox="0 0 24 24" fill="none"><rect x="3" y="7" width="18" height="14" rx="2" ry="2" fill="currentColor"></rect><rect x="8" y="3" width="8" height="4" rx="1" ry="1" fill="currentColor"></rect><line x1="6" y1="11" x2="18" y2="11" stroke="#0a1628" stroke-width="1"></line><line x1="6" y1="14" x2="18" y2="14" stroke="#0a1628" stroke-width="1"></line><line x1="6" y1="17" x2="18" y2="17" stroke="#0a1628" stroke-width="1"></line></svg></div><div>History</div></div>
  <div class="nav-item" onclick="window.location.href='profile.html'"><div class="nav-icon"><svg width="21.6" height="21.6" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="11" stroke="currentColor" stroke-width="2" fill="none"></circle><circle cx="12" cy="8" r="3" fill="currentColor"></circle><path d="M6 20c0-3.3 5-5 6-5s6 1.7 6 5" fill="currentColor"></path></svg></div><div>Profile</div></div>
  <div class="nav-item"><div class="nav-icon"><svg width="21.6" height="21.6" viewBox="0 0 24 24" fill="none"><rect x="2" y="2" width="20" height="20" rx="3" ry="3" stroke="currentColor" stroke-width="1.5" fill="none"></rect><rect x="8" y="18" width="8" height="2" fill="currentColor"></rect><rect x="11" y="10" width="2" height="8" fill="currentColor"></rect><path d="M6 10 C6 6, 18 6, 18 10 C18 14, 6 14, 6 10 Z" fill="currentColor"></path><path d="M6 10 C4 10, 4 12, 6 12" stroke="currentColor" stroke-width="1.5" fill="none"></path><path d="M18 10 C20 10, 20 12, 18 12" stroke="currentColor" stroke-width="1.5" fill="none"></path></svg></div><div>Rank</div></div>
  <div class="nav-item"><div class="nav-icon"><svg width="21.6" height="21.6" viewBox="0 0 24 24" fill="none"><rect x="2" y="2" width="20" height="20" rx="3" ry="3" stroke="currentColor" stroke-width="1.5" fill="none"></rect><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" fill="currentColor"></circle><line x1="12" y1="2" x2="12" y2="5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line><line x1="12" y1="19" x2="12" y2="22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line><line x1="2" y1="12" x2="5" y2="12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line><line x1="19" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line><line x1="5" y1="5" x2="7" y2="7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line><line x1="17" y1="17" x2="19" y2="19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line><line x1="5" y1="19" x2="7" y2="17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line><line x1="17" y1="7" x2="19" y2="5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line></svg></div><div>Settings</div></div>
</div>

<!-- Pair Panel (Ø§Ù„Ø¬Ø¯ÙŠØ¯) -->
<div class="pairPanel" id="pairPanel"><div class="pairHead"><b>Ø§Ù„Ø§Ø²ÙˆØ§Ø¬</b><button class="pairClose" id="pairClose" type="button">Ã—</button></div><div class="pairList" id="pairList"></div></div>

<!-- Firebase + (Ø±ØµÙŠØ¯ + Ø§ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø·) + Account switcher JS -->
<script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import{getAnalytics}from"https://www.gstatic.com/firebasejs/12.9.0/firebase-analytics.js";
import{getAuth,onAuthStateChanged}from"https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
import{getFirestore,doc,getDoc,setDoc,updateDoc,onSnapshot}from"https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";
const firebaseConfig={apiKey:"AIzaSyBOUqLixfphg3b8hajc4hkwV-VJmldGBVw",authDomain:"randers-c640b.firebaseapp.com",projectId:"randers-c640b",storageBucket:"randers-c640b.firebasestorage.app",messagingSenderId:"391496092929",appId:"1:391496092929:web:58208b4eb3e6f9a8571f00",measurementId:"G-DBDSVVF7PS"};
const app=initializeApp(firebaseConfig);try{getAnalytics(app)}catch(e){}
const auth=getAuth(app),db=getFirestore(app);

(function(){
var balanceBox=document.getElementById("balanceBox");if(!balanceBox)return;
var accMenu=document.getElementById("accMenu"),refillBtn=document.getElementById("refillBtn");
var demoAmtEl=document.getElementById("demoAmt"),realAmtEl=document.getElementById("realAmt");
var balLabel=document.getElementById("balLabel"),balAmount=document.getElementById("balAmount"),topAccIcon=document.getElementById("topAccIcon");
var avatarImg=document.getElementById("userAvatarImg"),defaultAvatarSrc=avatarImg?avatarImg.src:"";
var activeAcc="real",uRef=null,unsub=null,realBal=0,demoBal=10000;

function fmt(n){try{return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}catch(e){return (Math.round(n*100)/100).toFixed(2)}}
function toNum(v,def){if(typeof v==="number"&&isFinite(v))return v;if(typeof v==="string"){var n=parseFloat(v.replace(/[^0-9.\-]/g,""));return isFinite(n)?n:def}return def}
function renderAmounts(){if(realAmtEl)realAmtEl.textContent="$"+fmt(realBal);if(demoAmtEl)demoAmtEl.textContent="$"+fmt(demoBal)}
function updateTopBar(){
renderAmounts();
var amountTxt=(activeAcc==="real")?"$"+fmt(realBal):"$"+fmt(demoBal);
if(balAmount)balAmount.textContent=amountTxt;
if(balLabel)balLabel.textContent=(activeAcc==="real")?"QT Real USD":"QT Demo USD";
if(topAccIcon)topAccIcon.src=(activeAcc==="real")?"https://flagcdn.com/w40/us.png":"https://cdn-icons-png.flaticon.com/128/1344/1344761.png";
document.querySelectorAll(".accSwitchBtn").forEach(function(btn){btn.classList.toggle("active",(btn.dataset.acc||"demo")===activeAcc)});
document.querySelectorAll(".accItem").forEach(function(it){it.classList.toggle("active",(it.dataset.type||"demo")===activeAcc)});
}
function openMenu(){if(accMenu)accMenu.classList.add("show");balanceBox.classList.add("open")}
function closeMenu(){if(accMenu)accMenu.classList.remove("show");balanceBox.classList.remove("open")}
function toggleMenu(){if(!accMenu)return;accMenu.classList.contains("show")?closeMenu():openMenu()}
balanceBox.addEventListener("click",function(e){if(e.target&&e.target.closest&&e.target.closest("#accMenu"))return;e.stopPropagation();toggleMenu()});
document.addEventListener("click",function(e){if(!e.target||!e.target.closest||!e.target.closest("#balanceBox"))closeMenu()});
if(accMenu)accMenu.addEventListener("click",function(e){e.stopPropagation()});
document.querySelectorAll(".accSwitchBtn").forEach(function(btn){btn.addEventListener("click",function(){activeAcc=btn.dataset.acc||"demo";updateTopBar();closeMenu()})});
document.querySelectorAll(".accItem").forEach(function(it){it.addEventListener("click",function(){activeAcc=it.dataset.type||"demo";updateTopBar();closeMenu()})});
if(refillBtn)refillBtn.addEventListener("click",async function(){
demoBal=10000;renderAmounts();updateTopBar();
if(uRef)try{await updateDoc(uRef,{demobalance:10000})}catch(e){try{await setDoc(uRef,{demobalance:10000},{merge:true})}catch(_){}} 
refillBtn.textContent="âœ…";setTimeout(function(){refillBtn.textContent="ðŸ”„ Refill Demo Account"},900);
});
function applyUserData(d){
realBal=toNum(d&&d.balance,0);demoBal=toNum(d&&d.demobalance,10000);
var av=(d&&d.avatar)?String(d.avatar).trim():"";
if(avatarImg)avatarImg.src=av?av:defaultAvatarSrc;
updateTopBar();
}
async function ensureFields(user){
uRef=doc(db,"users",user.uid);
var defaults={email:user.email||"",balance:0,demobalance:10000,avatar:""};
var snap=await getDoc(uRef);
if(!snap.exists()){await setDoc(uRef,defaults);return defaults;}
var data=snap.data()||{},patch={};
if(data.email==null&&user.email)patch.email=user.email;
if(data.balance==null)patch.balance=0;
if(data.demobalance==null)patch.demobalance=10000;
if(data.avatar==null)patch.avatar="";
if(Object.keys(patch).length)await setDoc(uRef,patch,{merge:true});
return Object.assign({},defaults,data,patch);
}
onAuthStateChanged(auth,async function(user){
if(unsub){try{unsub()}catch(e){}unsub=null}
if(!user||!user.email){uRef=null;applyUserData({balance:0,demobalance:10000,avatar:""});return;}
try{var base=await ensureFields(user);applyUserData(base);unsub=onSnapshot(uRef,function(s){if(s.exists())applyUserData(s.data()||{})});}
catch(e){uRef=null;applyUserData({balance:0,demobalance:10000,avatar:""})}
});
updateTopBar();
})();
</script>

<!-- Pair switch UI logic (Ø§Ù„Ø¬Ø¯ÙŠØ¯) -->
<script>
(function(){
var hud=document.getElementById("pairHud"),panel=document.getElementById("pairPanel"),closeBtn=document.getElementById("pairClose"),list=document.getElementById("pairList");
var hudTxt=document.getElementById("pairHudTxt"),otc=document.getElementById("otcHud"),flagsBox=document.getElementById("pairFlags");
if(!hud||!panel||!list||!hudTxt||!flagsBox)return;
var fM={AED:"ae",CNY:"cn",AUD:"au",CAD:"ca",CHF:"ch",BHD:"bh",EUR:"eu",RUB:"ru",USD:"us",KES:"ke",LBP:"lb",QAR:"qa",TRY:"tr",SYP:"sy",EGP:"eg",INR:"in",IRR:"ir"};
var mkF=function(c){c=(c||"un").toUpperCase();return "https://flagcdn.com/w40/"+String((fM[c]||c)).toLowerCase()+".png"};
var pairs=[
{pair:"AED/CNY",otc:1,payout:.91,flags:["AED","CNY"]},{pair:"AUD/CAD",otc:1,payout:.88,flags:["AUD","CAD"]},{pair:"AUD/CHF",otc:1,payout:.92,flags:["AUD","CHF"]},{pair:"BHD/CNY",otc:1,payout:.86,flags:["BHD","CNY"]},
{pair:"EUR/RUB",otc:1,payout:.77,flags:["EUR","RUB"]},{pair:"EUR/USD",otc:1,payout:.92,flags:["EUR","USD"]},{pair:"KES/USD",otc:1,payout:.84,flags:["KES","USD"]},{pair:"LBP/USD",otc:1,payout:.79,flags:["LBP","USD"]},
{pair:"QAR/CNY",otc:1,payout:.83,flags:["QAR","CNY"]},{pair:"USD/CHF",otc:1,payout:.89,flags:["USD","CHF"]},{pair:"SYP/TRY",otc:1,payout:.87,flags:["SYP","TRY"]},{pair:"EGP/USD",otc:1,payout:.78,flags:["EGP","USD"]},
{pair:"USD/INR",otc:1,payout:.90,flags:["USD","INR"]}
];
var fav=new Set();
var fmtP=function(x){return Math.round((+x||0)*100)+"%"};
var setHud=function(p){
hudTxt.textContent=p.pair;
if(otc){otc.textContent=p.otc?"OTC":"";otc.style.display=p.otc?"inline-flex":"none"}
var f=p.flags||String(p.pair).split("/");
flagsBox.innerHTML='<img src="'+mkF(f[0])+'" alt=""><img src="'+mkF(f[1])+'" alt="">';
};
var render=function(){
pairs.sort(function(a,b){var fa=fav.has(a.pair)?1:0,fb=fav.has(b.pair)?1:0;if(fa!==fb)return fb-fa;return a.pair.localeCompare(b.pair)});
list.innerHTML=pairs.map(function(x){
var ab=String(x.pair).split("/"),st=fav.has(x.pair)?"â˜…":"â˜†";
return '<button class="pit" data-p="'+x.pair+'" type="button"><span class="pitL"><span class="star" data-s="1">'+st+'</span><span class="fg"><img src="'+mkF(ab[0])+'" alt=""><img src="'+mkF(ab[1])+'" alt=""></span><span class="nm">'+x.pair+'<span class="bad">OTC</span></span></span><span>+'+fmtP(x.payout)+'</span></button>';
}).join("");
};
var open=function(){panel.classList.add("on")},close=function(){panel.classList.remove("on")};
hud.addEventListener("click",function(e){e.stopPropagation();panel.classList.toggle("on");render()});
if(closeBtn)closeBtn.addEventListener("click",function(){close()});
document.addEventListener("click",function(e){if(panel.classList.contains("on")&&!e.target.closest("#pairPanel")&&!e.target.closest("#pairHud"))close()});
list.addEventListener("click",function(e){
var b=e.target.closest("button.pit");if(!b)return;
var p=b.getAttribute("data-p");
if(e.target&&e.target.getAttribute&&e.target.getAttribute("data-s")){fav.has(p)?fav.delete(p):fav.add(p);render();return;}
close();
var obj=pairs.find(function(x){return x.pair===p})||{pair:p,otc:1,flags:p.split("/")};setHud(obj);
try{if(window.chart&&typeof window.chart.switchPair==="function")window.chart.switchPair(p)}catch(_){}
});
setHud(pairs.find(function(x){return x.pair==="EUR/USD"})||pairs[0]);
render();
})();
</script>

<!-- Your original chart logic (Ø§Ù„Ø¬Ø¯ÙŠØ¯ - script.js Ø§Ù„Ù…Ø¹Ø¯Ù„) -->
<script type="module" src="./script.js"></script>
</body></html>
    
  </body>
  
</html>
